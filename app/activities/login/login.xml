<Page class="page" actionBarHidden="true" loaded="pageLoaded">
    <ActionBar title="Login"></ActionBar>

    <FlexboxLayout class="page">
        <StackLayout class="form">
            <Image class="logo" src="~/images/pl.png" />
            <Label class="header" text="Konsultacje" />

            <GridLayout rows="auto, auto, auto">
                <StackLayout row="0" class="input-field">
                    <TextField class="input" 
                               text="{{ username }}" 
                               hint="Nazwa użytkownika / E-mail" 
                               keyboardType="email"
                               autocorrect="false"
                               autocapitalizationType="none"
                               isEnabled="{{ !loading }}"
                               returnKeyType="next" />
                    <Label class="hr-light" />
                </StackLayout>

                <StackLayout row="1" class="input-field">
                    <TextField id="password" 
                               class="input"
                               text="{{ password }}"
                               hint="Password"
                               secure="true"
                               isEnabled="{{ !loading }}"
                               returnKeyType="{{ isLoggingIn ? 'done' : 'next' }}" />
                    <Label class="hr-light" />
                </StackLayout>

                <StackLayout row="2"
                             class="input-field"
                             visibility="{{ !isLoggingIn ? 'visible' : 'collapse' }}">
                    <TextField id="confirmPassword" 
                               class="input" 
                               text="{{ confirmPassword }}"
                               hint="Confirm password"
                               secure="true"
                               isEnabled="{{ !loading }}"
                               returnKeyType="done" />
                    <Label class="hr-light" />
                </StackLayout>

                <ActivityIndicator rowSpan="3" busy="{{ loading }}"></ActivityIndicator>
            </GridLayout>

            <Button text="{{ isLoggingIn ? 'Log In' : 'Sign Up' }}"
                    tap="{{ submit }}"
                    isEnabled="{{ !loading }}"
                    class="btn btn-primary m-t-20" />
        </StackLayout>

        <Label class="login-label sign-up-label" tap="{{ toggleForm }}">
            <FormattedString>
                <Span text="{{ isLoggingIn ? 'Don’t have an account? ' : 'Back to Login' }}" />
                <Span text="{{ isLoggingIn ? 'Sign up' : '' }}" class="bold" />
            </FormattedString>
        </Label>
    </FlexboxLayout>
</Page>